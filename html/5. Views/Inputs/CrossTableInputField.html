
    <!DOCTYPE html>
    <html lang='en'>
      <head>
        <meta charset='UTF-8'>
        <title>ADIOS</title>
        <link rel='stylesheet' href='../../../resources/assets/css/style.css'>
      </head>
      <body>
      <div id='wrapper'>
        <div class='overlay'></div>
        <nav class='navbar navbar-inverse fixed-top' id='sidebar-wrapper' role='navigation'>
          <ul class='nav sidebar-nav'>
            <div class='sidebar-header'>
              <div class='sidebar-brand'>
                <a href='#'>ADIOS Framework</a>
              </div>
            </div>
            <li class='dropdown'>
        <a 
          href='#1. Introduction' class='dropdown-toggle' data-toggle='dropdown'>
          1. Introduction <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../1. Introduction/Framework-comparison.html'>Framework-comparison</a></li><li><a href='../1. Introduction/Introduction.html'>Introduction</a></li><li><a href='../1. Introduction/Sample simple CRM application.html'>Sample simple CRM application</a></li></ul></li><li class='dropdown'>
        <a 
          href='#2. Getting started' class='dropdown-toggle' data-toggle='dropdown'>
          2. Getting started <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../2. Getting started/Deployment.html'>Deployment</a></li><li><a href='../2. Getting started/Directory-structure.html'>Directory-structure</a></li><li><a href='../2. Getting started/Installation.html'>Installation</a></li></ul></li><li class='dropdown'>
        <a 
          href='#3. Architectural Overview' class='dropdown-toggle' data-toggle='dropdown'>
          3. Architectural Overview <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../3. Architectural Overview/Introduction.html'>Introduction</a></li><li><a href='../3. Architectural Overview/Model-View-Controller.html'>Model-View-Controller</a></li></ul></li><li class='dropdown'>
        <a 
          href='#4. The basics' class='dropdown-toggle' data-toggle='dropdown'>
          4. The basics <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../4. The basics/Routing.html'>Routing</a></li></ul></li><li class='dropdown'>
        <a 
          href='#5. Views' class='dropdown-toggle' data-toggle='dropdown'>
          5. Views <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../5. Views/Button.html'>Button</a></li><li><a href='../5. Views/Cards.html'>Cards</a></li><li><a href='../5. Views/Chart.html'>Chart</a></li><li><a href='../5. Views/Dashboard.html'>Dashboard</a></li><li><a href='../5. Views/Data table.html'>Data table</a></li><li><a href='../5. Views/File browser.html'>File browser</a></li><li><a href='../5. Views/Form.html'>Form</a></li><li><a href='../5. Views/Grid.html'>Grid</a></li><li><a href='../5. Views/Html.html'>Html</a></li><li><a href='../5. Views/Input.html'>Input</a></li><li class='dropdown'>
        <a 
          href='#Inputs' class='dropdown-toggle' data-toggle='dropdown'>
          Inputs <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../5. Views/Inputs/CrossTableInputField.html'>CrossTableInputField</a></li><li><a href='../5. Views/Inputs/FileBrowser.html'>FileBrowser</a></li><li><a href='../5. Views/Inputs/ManyToMany.html'>ManyToMany</a></li><li><a href='../5. Views/Inputs/Settings panel.html'>Settings panel</a></li><li><a href='../5. Views/Inputs/Tags.html'>Tags</a></li></ul></li><li><a href='../5. Views/Introduction.html'>Introduction</a></li><li><a href='../5. Views/Table.html'>Table</a></li><li><a href='../5. Views/Tabs.html'>Tabs</a></li><li><a href='../5. Views/Title.html'>Title</a></li><li><a href='../5. Views/Tree.html'>Tree</a></li><li><a href='../5. Views/Window.html'>Window</a></li></ul></li><li class='dropdown'>
        <a 
          href='#6. Database' class='dropdown-toggle' data-toggle='dropdown'>
          6. Database <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li class='dropdown'>
        <a 
          href='#Data Types' class='dropdown-toggle' data-toggle='dropdown'>
          Data Types <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../6. Database/Data Types/Bool.html'>Bool</a></li><li><a href='../6. Database/Data Types/Boolean.html'>Boolean</a></li><li><a href='../6. Database/Data Types/Integer.html'>Integer</a></li></ul></li><li><a href='../6. Database/Data types.html'>Data types</a></li><li><a href='../6. Database/Introduction.html'>Introduction</a></li><li><a href='../6. Database/Model.html'>Model</a></li><li><a href='../6. Database/Query builder.html'>Query builder</a></li></ul></li><li class='dropdown'>
        <a 
          href='#7. Security' class='dropdown-toggle' data-toggle='dropdown'>
          7. Security <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../7. Security/Authentification.html'>Authentification</a></li><li><a href='../7. Security/Authorization.html'>Authorization</a></li></ul></li><li class='dropdown'>
        <a 
          href='#8. Testing' class='dropdown-toggle' data-toggle='dropdown'>
          8. Testing <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../8. Testing/Introduction.html'>Introduction</a></li></ul></li><li class='dropdown'>
        <a 
          href='#9. Advanced features' class='dropdown-toggle' data-toggle='dropdown'>
          9. Advanced features <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../9. Advanced features/Designing forms.html'>Designing forms</a></li><li><a href='../9. Advanced features/FormComplex.html'>FormComplex</a></li><li><a href='../9. Advanced features/Prototype builder.html'>Prototype builder</a></li></ul></li>
          </ul>
        </nav>

        <div id='page-content-wrapper'>
          <!--<button 
            type='button' 
            class='hamburger animated fadeInLeft is-closed' 
            data-toggle='offcanvas'
          >
            <span class='hamb-top'></span>
            <span class='hamb-middle'></span>
            <span class='hamb-bottom'></span>
          </button>-->

          <div class='container'>
            <div class='row'>
              <div class='col-lg-8 col-lg-offset-2'>
                <h1>CrossTableInputField</h1>
<p>The CrossTableInputField Input is used to render and edit data of a foreign key model. </p>
<h2>Property table</h2>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>model</td>
<td>string</td>
<td>Path to the main model</td>
</tr>
<tr>
<td>cross_model</td>
<td>string</td>
<td>Path to a foreign model</td>
</tr>
<tr>
<td>cross_key_column</td>
<td>string</td>
<td>Name of the foreign key column on the main model</td>
</tr>
<tr>
<td>cross_key_value</td>
<td>string</td>
<td>Foreign key value</td>
</tr>
<tr>
<td>key_by</td>
<td>string</td>
<td>How should the values array be keyed, check the $itemValues property below</td>
</tr>
<tr>
<td>columns</td>
<td>integer</td>
<td>Number of columns to be displayed</td>
</tr>
<tr>
<td>input_callback</td>
<td>string</td>
<td>Path to a function that renders an input</td>
</tr>
</tbody>
</table>
<h2>Usage</h2>
<pre><code class="language-php">(new \ADIOS\Core\Views\Inputs\CrossTableInputField($adios, [
    # view properties
]))</code></pre>
<h2>Examples</h2>
<p><strong>Example #1:</strong></p>
<pre><code class="language-php">return (new \ADIOS\Core\Views\Inputs\CrossTableInputField($this-&gt;adios, [  
    'model' =&gt; 'App/Widgets/Common/AddressBook/Models/Contact',  
    'cross_model' =&gt; 'App/Widgets/Common/AddressBook/Models/Person',  
    'cross_key_column' =&gt; 'id_com_contact',  
    'cross_key_value' =&gt; '15',  
    'key_by' =&gt; 'id',  
    'input_callback' =&gt; 'ADIOS\Actions\UI\Debug::input_callback',
    'columns' =&gt; 4, 
    'items' =&gt; [  
      [ 'title' =&gt; 'ID' ],  
      [ 'title' =&gt; 'Contact ID' ],  
      [ 'title' =&gt; 'First Name' ],  
      [ 'title' =&gt; 'Last Name' ],  
      [ 'title' =&gt; 'Middle Name' ],  
      [ 'title' =&gt; 'Title Before' ],  
      [ 'title' =&gt; 'Title After' ],  
      [ 'title' =&gt; 'Email' ],  
      [ 'title' =&gt; 'Phone' ],  
      [ 'title' =&gt; 'LinkedIn' ]
    ]
]))-&gt;render();</code></pre>
<p>In this example, ADIOS renders a CrossTableInputField of the <code>cross_model</code>, which is referenced in the column with the name <code>cross_key_column</code> in <code>model</code>.  It specifically chooses the model with id 15, as stated in <code>cross_key_value</code>. The final view will also be split into 4 columns, based on the <code>columns</code> property. The inputs rendered are defined by the <code>items</code> property.</p>
<p><img src="../../../resources/img/CrossTableInputField_example_01.png" alt="Example 01" /></p>
<h2>input_callback function</h2>
<p>To render a CrossTableInputField, you also need to code an input_callback function. You can use the following one to take inspiration. It is also required to render the examples.</p>
<pre><code class="language-php">static function input_callback($view, $inputElementId, $itemUID, $itemValues): string  
{  
  $itemValues = array_values(array_values($itemValues)[0]);  
  $inputProperties = explode('_', $inputElementId); # UUIIDD_input_123  
  $inputNumber = $inputProperties[sizeof($inputProperties) - 1];  

  $input = new Input($view-&gt;adios, [  
    'type' =&gt; 'varchar',  
    'value' =&gt; $itemValues[$inputNumber]  
  ]);  

  return $input-&gt;render();  
}</code></pre>
<blockquote>
<p>:bulb: It is recommended that this function is static. Although you have to code it yourself, it enables you to fully customize the input view and doesn't limit you to sticking to the given properties even when using prototype builder.</p>
</blockquote>
<h3>$itemValues property</h3>
<p>To display the data desired, the <code>input_callback</code> function gets all the retrieved data together as an array supplied in the <code>$itemValues</code> argument. All rows from the foreign model, that suit the given condition ( foreign key equals the <code>cross_key_value</code> view property, there can also be more ) are stored as items in the <code>$itemValues</code> array. Key to these items are the values of the <code>key_by</code> view property. </p>
<p>The example function above gets rid of the keys, takes only the first array, then gets rid of the keys of that array as well and then displays always the <code>$inputNumber</code>-th value in the final array, where <code>$inputNumber</code> is the last number returned in the <code>$inputElementId</code> argument - it is the number of how many inputs have already been rendered, like variable <code>i</code> in a for cycle.</p>
<p><strong>An <code>$itemValues</code> array may look like this:</strong></p>
<pre><code class="language-php">array(2) {
    [3] =&gt; array(11) {
        ["id"] =&gt; string(1) "3"
        ["id_com_contact"] =&gt; string(2) "15"
        ["first_name"] =&gt; string(6) "Auctor"
        ["last_name"] =&gt; string(8) "Molestie"
        ["middle_name"] =&gt; string(6) "Auctor"
        ["title_before"] =&gt; string(9) "Malesuada"
        ["title_after"] =&gt; string(13) "Ligula luctus"
        ["email"] =&gt; string(14) "2Ligula luctus"
        ["phone"] =&gt; string(6) "Mauris"
    },
    [7] =&gt; array(11) {
        ["id"] =&gt; string(1) "7"
        ["id_com_contact"] =&gt; string(2) "15"
        ["first_name"] =&gt; string(6) "Mauris"
        ["last_name"] =&gt; string(9) "Facilisis"
        ["middle_name"] =&gt; string(6) "Auctor"
        ["title_before"] =&gt; string(9) "Vulputate"
        ["title_after"] =&gt; string(8) "Molestie"
        ["email"] =&gt; string(10) "6Facilisis"
        ["phone"] =&gt; string(5) "Massa"
    }
}</code></pre>
<blockquote>
<p>:bulb: Notice, that the two items are keyed by their <code>id</code> key values because the views property <code>key_by</code> was 'id'. They could also be keyed for example by their <code>first_name</code> key values <em>as long as these are unique.</em></p>
</blockquote>
              </div>
            </div>
          </div>
        </div>
      </div>
      </body>
    </html>

    <script src='../../../resources/assets/js/main.js'></script>
  