
    <!DOCTYPE html>
    <html lang='en'>
      <head>
        <meta charset='UTF-8'>
        <title>ADIOS</title>
        <link rel='stylesheet' href='../../resources/assets/css/style.css'>
      </head>
      <body>
      <div id='wrapper'>
        <div class='overlay'></div>
        <nav class='navbar navbar-inverse fixed-top' id='sidebar-wrapper' role='navigation'>
          <ul class='nav sidebar-nav'>
            <div class='sidebar-header'>
              <div class='sidebar-brand'>
                <img class='logo-img' src='../../resources/assets/adios.jpeg' />
                <a href='#'>ADIOS</a>
              </div>
            </div>
            <li class='dropdown'>
        <a 
          href='#1. Introduction' class='dropdown-toggle' data-toggle='dropdown'>
          1. Introduction <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../1. Introduction/Framework-comparison.html'>Framework-comparison</a></li><li><a href='../1. Introduction/Introduction.html'>Introduction</a></li><li><a href='../1. Introduction/Sample simple CRM application.html'>Sample simple CRM application</a></li></ul></li><li class='dropdown'>
        <a 
          href='#2. Getting started' class='dropdown-toggle' data-toggle='dropdown'>
          2. Getting started <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../2. Getting started/Deployment.html'>Deployment</a></li><li><a href='../2. Getting started/Directory-structure.html'>Directory-structure</a></li><li><a href='../2. Getting started/Installation.html'>Installation</a></li></ul></li><li class='dropdown'>
        <a 
          href='#3. Architectural Overview' class='dropdown-toggle' data-toggle='dropdown'>
          3. Architectural Overview <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../3. Architectural Overview/Introduction.html'>Introduction</a></li><li><a href='../3. Architectural Overview/Model-View-Controller.html'>Model-View-Controller</a></li></ul></li><li class='dropdown'>
        <a 
          href='#4. The basics' class='dropdown-toggle' data-toggle='dropdown'>
          4. The basics <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../4. The basics/Routing.html'>Routing</a></li></ul></li><li class='dropdown'>
        <a 
          href='#5. Views' class='dropdown-toggle' data-toggle='dropdown'>
          5. Views <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../5. Views/Button.html'>Button</a></li><li><a href='../5. Views/Cards.html'>Cards</a></li><li><a href='../5. Views/Chart.html'>Chart</a></li><li><a href='../5. Views/Dashboard.html'>Dashboard</a></li><li><a href='../5. Views/Data table.html'>Data table</a></li><li><a href='../5. Views/File browser.html'>File browser</a></li><li><a href='../5. Views/Form.html'>Form</a></li><li><a href='../5. Views/Grid.html'>Grid</a></li><li><a href='../5. Views/Html.html'>Html</a></li><li><a href='../5. Views/Input.html'>Input</a></li><li class='dropdown'>
        <a 
          href='#Inputs' class='dropdown-toggle' data-toggle='dropdown'>
          Inputs <small style='float:right';padding-top:5px>﹀</small>
<<<<<<< HEAD
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../Inputs/FileBrowser.html'>FileBrowser</a></li><li><a href='../Inputs/Tags.html'>Tags</a></li></ul></li><li><a href='../5. Views/Introduction.html'>Introduction</a></li><li><a href='../5. Views/Settings panel.html'>Settings panel</a></li><li><a href='../5. Views/Table.html'>Table</a></li><li><a href='../5. Views/Tabs.html'>Tabs</a></li><li><a href='../5. Views/Title.html'>Title</a></li><li><a href='../5. Views/Tree.html'>Tree</a></li><li><a href='../5. Views/Window.html'>Window</a></li></ul></li><li class='dropdown'>
=======
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../Inputs/FileBrowser.html'>FileBrowser</a></li></ul></li><li><a href='../5. Views/Introduction.html'>Introduction</a></li><li><a href='../5. Views/Settings panel.html'>Settings panel</a></li><li><a href='../5. Views/Table.html'>Table</a></li><li><a href='../5. Views/Tabs.html'>Tabs</a></li><li><a href='../5. Views/Title.html'>Title</a></li><li><a href='../5. Views/Tree.html'>Tree</a></li><li><a href='../5. Views/Window.html'>Window</a></li></ul></li><li class='dropdown'>
>>>>>>> 11727
        <a 
          href='#6. Database' class='dropdown-toggle' data-toggle='dropdown'>
          6. Database <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li class='dropdown'>
        <a 
          href='#Data Types' class='dropdown-toggle' data-toggle='dropdown'>
          Data Types <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../Data Types/Integer.html'>Integer</a></li></ul></li><li><a href='../6. Database/Data types.html'>Data types</a></li><li><a href='../6. Database/Introduction.html'>Introduction</a></li><li><a href='../6. Database/Model.html'>Model</a></li><li><a href='../6. Database/Query builder.html'>Query builder</a></li></ul></li><li class='dropdown'>
        <a 
          href='#7. Security' class='dropdown-toggle' data-toggle='dropdown'>
          7. Security <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../7. Security/Authentification.html'>Authentification</a></li><li><a href='../7. Security/Authorization.html'>Authorization</a></li></ul></li><li class='dropdown'>
        <a 
          href='#8. Testing' class='dropdown-toggle' data-toggle='dropdown'>
          8. Testing <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../8. Testing/Introduction.html'>Introduction</a></li></ul></li><li class='dropdown'>
        <a 
          href='#9. Advanced features' class='dropdown-toggle' data-toggle='dropdown'>
          9. Advanced features <small style='float:right';padding-top:5px>﹀</small>
        </a><ul class='dropdown-menu animated fadeInLeft' role='menu'><li><a href='../9. Advanced features/Designing forms.html'>Designing forms</a></li><li><a href='../9. Advanced features/FormComplex.html'>FormComplex</a></li><li><a href='../9. Advanced features/Prototype builder.html'>Prototype builder</a></li></ul></li>
          </ul>
        </nav>

        <div id='page-content-wrapper'>
          <!--<button 
            type='button' 
            class='hamburger animated fadeInLeft is-closed' 
            data-toggle='offcanvas'
          >
            <span class='hamb-top'></span>
            <span class='hamb-middle'></span>
            <span class='hamb-bottom'></span>
          </button>-->

          <div class='container'>
            <div class='row'>
              <div class='col-lg-8 col-lg-offset-2'>
                <h1>Designing forms</h1>
<p>The <a href="../5.%20Views/Form.md">Form</a> view contains a flexible and easy-to-configure templating engine that can render complex forms for inserting or editing records in a <a href="../6.%20Database/Model.md">model</a>. With this templating engine and only a little coding, you will be able to create complex forms for manipulating your data.</p>
<p>The definition of the Form's template can contain:</p>
<ul>
<li>inputs to the columns of a model based on its <a href="../6.%20Database/Data%20types.md">data type</a>;</li>
<li>lookups</li>
<li>groups of inputs</li>
<li>columns</li>
<li>tabs</li>
<li>custom fields</li>
<li>custom buttons (by default, the <code>Save</code>, <code>Delete</code> and <code>Close</code> buttons are rendered)</li>
</ul>
<p>In this chapter, we will learn how to configure the template.</p>
<h2>Configuring the template</h2>
<p>The configuration of the template is done by providing a <code>model</code> and <code>template</code> parameters to the <a href="../5.%20Views/Form.md">Form</a> view:</p>
<pre><code class="language-php">$theForm = new \ADIOS\Core\Views\Form(
  $adios,
  [
    'model' =&gt; 'App/Widgets/AddressBook/Models/Contact',
    'template' =&gt; [
      'first_name',
      'last_name',
      'email'
    ]
  ]
)</code></pre>
<blockquote>
<p>:bulb: Check the <code>AddressBook/Contact/Add-Version1</code> action in the <a href="../../resources/examples/prototype-builder-yaml/AddressBook.yml">AddressBook.yml</a></p>
<p>:bulb: You can create a .yml file with the definition of the template and use the <a href="./Prototype%20builder.md"><code>prototype builder</code></a> feature to generate the source code from the command line.</p>
</blockquote>
<p>The <code>model</code> parameter is used to get the list of available columns and their properties (data type, title, ...).</p>
<h2>Hello world example</h2>
<p>The easiest configuration of the form's template is to provide the list of columns which we want to render into the form, in a form of an array. The form with the configuration from the previous example would be rendered by like this:</p>
<p><img src="../../resources/img/contact_add1.png" alt="Hello world example form" /></p>
<p>You only need to launch the <code>render()</code> method:</p>
<pre><code class="language-php">echo $theForm-&gt;render();</code></pre>
<h2>Using model's configuration to render a form</h2>
<p>You may ask, where the other information like the window title or the titles of the inputs come from. The answer is: from a <a href="../6.%20Database/Model.md">model</a>. The <em>model</em> contains several properties used by forms, e.g.:</p>
<ul>
<li>formTitleForInserting</li>
<li>formTitleForEditing</li>
</ul>
<p>Additionaly, the definition of model's columns (provided by the <code>columns()</code> method of model) contains some other information used in rendering of the form, e.g.:</p>
<ul>
<li>type</li>
<li>title</li>
<li>unit</li>
</ul>
<p>Check <a href="https://github.com/wai-blue/ADIOS/blob/main/src/Core/Model.php">\ADIOS\Core\Model class</a> for the list of all properies used.</p>
<h2>Rendering views inside a form</h2>
<p>Sometimes you need to include more complex views inside a form. A typical example is a table with the list of associated records.</p>
<p>This can be achieved by providing the view class and parameters to the templating engine. In the example below, the view <a href="../5.%20Views/Table.md">Table</a> will be rendered.</p>
<pre><code class="language-php">$theForm = new \ADIOS\Core\Views\Form(
  $adios,
  [
    'model' =&gt; 'App/Widgets/AddressBook/Models/Contact',
    'template' =&gt; [
      'columns' =&gt; [
        'first_name',
        'last_name',
        [
          'view' =&gt; 'Table',
          'params' =&gt; [
            'model' =&gt; 'App/Widgets/AddressBook/Models/ContactAddress',
            'where' =&gt; [
              'id_contact',
              '=',
              $this-&gt;params['id'],
            ]
          ]
        ]
      ]
    ]
  ]
)</code></pre>
<h2>More complex examples</h2>
<h3>Tabs</h3>
<p>Let's imagine, the model for storing the contacts could be far more complex and could contain lots of columns, somehow logically grouped. In such case, you may want to render a form using tabs. With the form's templating engine, this is very simple.</p>
<p>For example, this configuration of the template:</p>
<pre><code class="language-php">$theFormWithTabs = new \ADIOS\Core\Views\Form(
  $adios,
  [
    'model' =&gt; 'App/Widgets/AddressBook/Models/Contact',
    'template' =&gt; [
      'columns' =&gt; [
        [
          'tabs' =&gt; [
            'Basic information' =&gt; [
              'first_name',
              'middle_name',
              'last_name',
              'email'
            ],
            'Social profiles' =&gt; [
              'url_facebook',
              'url_linkedin'
            ]
          ]
        ]
      ]
    ]
  ]
)</code></pre>
<blockquote>
<p>:bulb: Check the <code>AddressBook/Contact/Add-Version2</code> action in the <a href="../../resources/examples/prototype-builder-yaml/AddressBook.yml">AddressBook.yml</a></p>
</blockquote>
<p>Would end up with the form rendered followingly:</p>
<p><img src="../../resources/img/contact_add2.png" alt="Hello world example form" /></p>
<h3>Groupping inside a tab</h3>
<pre><code class="language-php">$theFormWithTabs = new \ADIOS\Core\Views\Form(
  $adios,
  [
    'model' =&gt; 'App/Widgets/AddressBook/Models/Contact',
    'template' =&gt; [
      'columns' =&gt; [
        [
          'tabs' =&gt; [
            'Basic information' =&gt; [
              'group' =&gt; [
                'title' =&gt; 'Full name',
                'items' =&gt; [
                  'first_name',
                  'middle_name',
                  'last_name'
                ],
              ],
              'group' =&gt; [
                'title' =&gt; 'Contact details',
                'items' =&gt; [
                  'email',
                  'phone'
                ]
              ]
            ],
            'Social profiles' =&gt; [
              'url_facebook',
              'url_linkedin'
            ]
          ]
        ]
      ]
    ]
  ]
)</code></pre>
<blockquote>
<p>:bulb: Check the <code>AddressBook/Contact/Add-Version3</code> action in the <a href="../examples/prototype-builder-yaml/AddressBook.yml">AddressBook.yml</a></p>
</blockquote>
<p><img src="../../resources/img/contact_add3.png" alt="Hello world example form" /></p>
<h3>Multiple columns</h3>
<p>...</p>
<h3>Tables linked via foreign keys (lookups)</h3>
<p>Let's have a form to edit the contact and each contact can have several addresses associated.</p>
<p>In this case, you would have two models:</p>
<ol>
<li><code>\App\Widgets\AddressBook\Models\Contact</code> to store the basic information about the contact like <code>first_name</code>, <code>last_name</code> or <code>email</code>.</li>
<li><code>\App\Widgets\AddressBook\Models\ContactAddress</code> to store the associated addresses. This model would contain a <em>lookup</em> column <code>id_contact</code> - the foreign key to the Contact.</li>
</ol>
<p>The easiest way how to build a UI to manage this dataset, is to create a form for the <code>Contact</code> model, containing a table with the list of associated records from the <code>ContactAddress</code> model. And to make the form nice looking, we will split the form into two tabs, one for the contact details and the second for the table.</p>
<pre><code class="language-php">$theForm = new \ADIOS\Core\Views\Form(
  $adios,
  [
    'model' =&gt; 'App/Widgets/AddressBook/Models/Contact',
    'template' =&gt; [

      'columns' =&gt; [
        [
          'tabs' =&gt; [
            'Basic information' =&gt; [
              'group' =&gt; [
                'title' =&gt; 'Full name',
                'items' =&gt; [
                  'first_name',
                  'middle_name',
                  'last_name'
                ],
              ],
              'group' =&gt; [
                'title' =&gt; 'Contact details',
                'items' =&gt; [
                  'email',
                  'phone'
                ]
              ]
            ],
            'Social profiles' =&gt; [
              'url_facebook',
              'url_linkedin'
            ],
            'Addresses' =&gt; [
              [
                'view' =&gt; 'Table',
                'params' =&gt; [
                  'model' =&gt; 'App/Widgets/AddressBook/Models/ContactAddress',
                  'where' =&gt; [
                    'id_contact',
                    '=',
                    $this-&gt;params['id'],
                  ]
                ]
              ]
            ]
          ]
        ]
      ]
    ]
  ]
)</code></pre>
<blockquote>
<p>:bulb: Check the <code>AddressBook/Contact/Edit-Version2</code> action in the <a href="../../resources/examples/prototype-builder-yaml/AddressBook.yml">AddressBook.yml</a></p>
</blockquote>
<h3>Inputs based on lookuped models</h3>
<p><code>id_com_contact_person:LOOKUP:title_before</code></p>
              </div>
            </div>
          </div>
        </div>
      </div>
      </body>
    </html>

    <script src='../../resources/assets/js/main.js'></script>
  